<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Streamify Media Gallery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        body.light-mode {
            background: linear-gradient(135deg, #f0f4f8 0%, #e2e8f0 100%);
            color: #2d3748;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            color: #e5e7eb;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }
        
        body.dark-mode ::-webkit-scrollbar-track {
            background: #1f2937;
        }
        
        body.light-mode ::-webkit-scrollbar-track {
            background: #e2e8f0;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #06b6d4, #10b981);
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #0891b2, #059669);
        }

        /* Video Card Animations */
        .video-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body.dark-mode .video-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(6, 182, 212, 0.3);
        }
        
        body.light-mode .video-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(6, 182, 212, 0.2);
        }

        /* Simple Video Player */
        .simple-video-container {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        body.dark-mode .simple-video-container {
            background: #000;
        }
        
        body.light-mode .simple-video-container {
            background: #1a202c;
        }

        .simple-video-container video {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 12px;
        }

        .simple-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            padding: 15px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .simple-video-container:hover .simple-controls {
            opacity: 1;
        }

        .simple-progress {
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
            cursor: pointer;
            margin-bottom: 10px;
        }

        .simple-progress-filled {
            height: 100%;
            background: linear-gradient(90deg, #06b6d4, #10b981);
            border-radius: 2px;
            transition: width 0.1s;
        }

        .simple-control-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 6px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }

        .simple-control-btn:hover {
            background: rgba(6, 182, 212, 0.5);
            transform: scale(1.05);
        }

        /* Image Viewer */
        .image-container {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        body.dark-mode .image-container {
            background: #000;
        }
        
        body.light-mode .image-container {
            background: #1a202c;
        }

        .image-container img {
            max-width: 100%;
            max-height: 70vh;
            object-fit: contain;
        }

        /* Download Button Animation */
        .download-btn {
            position: relative;
            overflow: hidden;
        }

        .download-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .download-btn:active::before {
            width: 300px;
            height: 300px;
        }

        /* Hero Section Animation */
        .hero-section {
            animation: fadeIn 1s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Badge Styles */
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge-video {
            background: linear-gradient(135deg, #ec4899, #8b5cf6);
        }

        .badge-image {
            background: linear-gradient(135deg, #10b981, #06b6d4);
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive video thumbnail */
        .video-thumbnail {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        @media (min-width: 640px) {
            .video-thumbnail {
                height: 225px;
            }
        }

        /* Theme Toggle */
        .theme-toggle {
            position: relative;
            width: 60px;
            height: 30px;
            background: #4a5568;
            border-radius: 15px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .theme-toggle.light {
            background: #cbd5e0;
        }
        
        .theme-toggle.dark {
            background: #2d3748;
        }
        
        .toggle-slider {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }
        
        .theme-toggle.light .toggle-slider {
            transform: translateX(30px);
        }
        
        .theme-toggle.dark .toggle-slider {
            transform: translateX(0);
        }

        /* Mobile Grid Improvements */
        @media (max-width: 640px) {
            .mobile-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .mobile-card {
                margin-bottom: 0.5rem;
            }
            
            .mobile-hero {
                height: 250px;
                padding: 1rem;
            }
            
            .mobile-hero h1 {
                font-size: 1.75rem;
            }
            
            .mobile-hero p {
                font-size: 1rem;
            }
        }

        @media (min-width: 641px) and (max-width: 1024px) {
            .mobile-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1.5rem;
            }
        }
    </style>
</head>
<body class="dark-mode min-h-screen">

    <!-- Header -->
    <header class="sticky top-0 z-50 backdrop-blur-md border-b shadow-2xl transition-colors">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-8">
                <div class="text-2xl font-bold flex items-center transition-colors">
                    <svg class="w-8 h-8 mr-2 text-cyan-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zm12.553 1.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"/>
                    </svg>
                    <span class="dark-mode:text-white light-mode:text-gray-900">Streamify</span>
                </div>
                <nav class="hidden md:flex space-x-6 text-sm font-semibold">
                    <a href="#" class="dark-mode:text-white light-mode:text-gray-900 border-b-2 border-cyan-400 pb-1 transition-colors">Home</a>
                    <a href="#" class="dark-mode:text-gray-400 light-mode:text-gray-600 hover:dark-mode:text-white hover:light-mode:text-gray-900 pb-1 transition-colors">Browse</a>
                    <a href="#" class="dark-mode:text-gray-400 light-mode:text-gray-600 hover:dark-mode:text-white hover:light-mode:text-gray-900 pb-1 transition-colors">Categories</a>
                </nav>
            </div>
            <div class="flex items-center space-x-4">
                <div class="theme-toggle dark" id="themeToggle">
                    <div class="toggle-slider"></div>
                </div>
                <div class="relative">
                    <input type="text" placeholder="Search media..." class="dark-mode:bg-gray-800 light-mode:bg-gray-200 dark-mode:text-white light-mode:text-gray-900 text-sm rounded-full py-2 pl-4 pr-10 focus:ring-2 focus:ring-cyan-500 focus:outline-none w-40 md:w-60 transition-all">
                    <svg class="w-4 h-4 dark-mode:text-gray-400 light-mode:text-gray-600 absolute right-3 top-1/2 transform -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div id="app-container"></div>
    </main>

    <script>
        // Mock Data with simplified aspect ratios
        const mediaItems = [
            { id: 1, title: "Underwater Cities: The Deep Blue", category: "Trending Now", description: "Dive into the unexplored depths of the ocean and witness the mysterious ecosystems thriving beneath the surface. A journey into bioluminescence and silent giants.", author: "Muhammad Rizwan", type: "video", videoUrl: "video1.mp4", aspectRatio: "16-9" }, { id: 2, title: "Arctic Wilderness Adventure", category: "Trending Now", description: "Experience the unforgiving conditions of the Arctic Circle. Learn essential skills for survival in extreme cold, isolation, and unpredictable weather.", author: "Liam O'Connell", type: "video", videoUrl: "video2.mp4", aspectRatio: "16-9" }, { id: 3, title: "Quantum Computing Revolution", category: "Trending Now", description: "An exclusive look at the groundbreaking advancements in quantum computing, AI, and sustainable energy that will define the next decade.", author: "Ava Sharma", type: "video", videoUrl: "video3.mp4", aspectRatio: "16-9" }, { id: 4, title: "Cosmic Nebula Visualization", category: "Trending Now", description: "A spectacular visual journey detailing the incredible process of stellar formation, from dense gas clouds to brilliant, burning giants.", author: "Prof. Ben Carter", type: "image", imgUrl: "image1.png", aspectRatio: "16-9" }, { id: 5, title: "Ancient Pyramids Discovery", category: "Recommended For You", description: "Unraveling the secrets of a civilization that vanished without a trace. Archaeological evidence, theories, and stunning reconstructions.", author: "Dr. John Finch", type: "image", imgUrl: "image2.png", aspectRatio: "3-2" }, { id: 6, title: "Culinary Fusion Masterclass", category: "Recommended For You", description: "Join Chef Marco as he blends global culinary traditions into breathtaking new dishes. Episode 1: Asian-Latin Fusion.", author: "Sarah Chen", type: "video", videoUrl: "video4.mp4", aspectRatio: "16-9" }, { id: 7, title: "Next-Gen Robotics", category: "Recommended For You", description: "From factory floors to surgical theaters, explore the cutting-edge of robotics and how machines are reshaping the future of work and life.", author: "Mike Lawson", type: "video", videoUrl: "video5.mp4", aspectRatio: "16-9" }, { id: 8, title: "Northern Lights Magic", category: "Recommended For You", description: "Capture the ethereal beauty of Aurora Borealis dancing across the Arctic sky in stunning detail.", author: "Emma Frost", type: "image", imgUrl: "image3.png", aspectRatio: "16-9" }, { id: 9, title: "Vertical Mobile Showcase", category: "Mobile Content", description: "Perfectly formatted for mobile viewing with a vertical aspect ratio.", author: "Mobile Creator", type: "video", videoUrl: "video6.mp4", aspectRatio: "9-16" }, { id: 10, title: "Square Artwork", category: "Art Gallery", description: "A beautiful square composition perfect for social media.", author: "Digital Artist", type: "image", imgUrl: "image4.png", aspectRatio: "1-1" }, { id: 11, title: "Square Artwork", category: "Art Gallery", description: "A beautiful square composition perfect for social media.", author: "Digital Artist", type: "image", imgUrl: "image5.png", aspectRatio: "1-1" }, { id: 12, title: "Square Artwork", category: "Art Gallery", description: "A beautiful square composition perfect for social media.", author: "Digital Artist", type: "image", imgUrl: "image6.png", aspectRatio: "1-1" }, { id: 13, title: "Square Artwork", category: "Art Gallery", description: "A beautiful square composition perfect for social media.", author: "Digital Artist", type: "image", imgUrl: "image7.png", aspectRatio: "1-1" }, { id: 14, title: "Square Artwork", category: "Art Gallery", description: "A beautiful square composition perfect for social media.", author: "Digital Artist", type: "image", imgUrl: "image8.png", aspectRatio: "1-1" }, { id: 15, title: "Square Artwork", category: "Art Gallery", description: "A beautiful square composition perfect for social media.", author: "Digital Artist", type: "image", imgUrl: "image9.png", aspectRatio: "1-1" }, { id: 16, title: "Square Artwork", category: "Art Gallery", description: "A beautiful square composition perfect for social media.", author: "Digital Artist", type: "image", imgUrl: "image10.png", aspectRatio: "1-1" }, { id: 17, title: "Square Artwork", category: "Art Gallery", description: "A beautiful square composition perfect for social media.", author: "Digital Artist", type: "image", imgUrl: "image11.png", aspectRatio: "1-1" }, { id: 18, title: "Square Artwork", category: "Art Gallery", description: "A beautiful square composition perfect for social media.", author: "Digital Artist", type: "image", imgUrl: "image12.png", aspectRatio: "1-1" }, { id: 19, title: "Square Artwork", category: "Art Gallery", description: "A beautiful square composition perfect for social media.", author: "Digital Artist", type: "image", imgUrl: "image13.png", aspectRatio: "1-1" }, { id: 20, title: "Underwater Cities: The Deep Blue", category: "Trending Now", description: "Dive into the unexplored depths of the ocean and witness the mysterious ecosystems thriving beneath the surface. A journey into bioluminescence and silent giants.", author: "Muhammad Rizwan", type: "video", videoUrl: "video7.mp4", aspectRatio: "16-9" }, { id: 21, title: "Underwater Cities: The Deep Blue", category: "Trending Now", description: "Dive into the unexplored depths of the ocean and witness the mysterious ecosystems thriving beneath the surface. A journey into bioluminescence and silent giants.", author: "Muhammad Rizwan", type: "video", videoUrl: "video8.mp4", aspectRatio: "16-9" }, { id: 22, title: "Underwater Cities: The Deep Blue", category: "Trending Now", description: "Dive into the unexplored depths of the ocean and witness the mysterious ecosystems thriving beneath the surface. A journey into bioluminescence and silent giants.", author: "Muhammad Rizwan", type: "video", videoUrl: "video9.mp4", aspectRatio: "16-9" }, { id: 23, title: "Underwater Cities: The Deep Blue", category: "Trending Now", description: "Dive into the unexplored depths of the ocean and witness the mysterious ecosystems thriving beneath the surface. A journey into bioluminescence and silent giants.", author: "Muhammad Rizwan", type: "video", videoUrl: "video10.mp4", aspectRatio: "16-9" }, { id: 24, title: "Underwater Cities: The Deep Blue", category: "Trending Now", description: "Dive into the unexplored depths of the ocean and witness the mysterious ecosystems thriving beneath the surface. A journey into bioluminescence and silent giants.", author: "Muhammad Rizwan", type: "video", videoUrl: "video11.mp4", aspectRatio: "16-9" }, { id: 25, title: "Underwater Cities: The Deep Blue", category: "Trending Now", description: "Dive into the unexplored depths of the ocean and witness the mysterious ecosystems thriving beneath the surface. A journey into bioluminescence and silent giants.", author: "Muhammad Rizwan", type: "video", videoUrl: "video12.mp4", aspectRatio: "16-9" }, { id: 26, title: "Underwater Cities: The Deep Blue", category: "Trending Now", description: "Dive into the unexplored depths of the ocean and witness the mysterious ecosystems thriving beneath the surface. A journey into bioluminescence and silent giants.", author: "Muhammad Rizwan", type: "video", videoUrl: "video13.mp4", aspectRatio: "16-9" }, { id: 27, title: "Underwater Cities: The Deep Blue", category: "Trending Now", description: "Dive into the unexplored depths of the ocean and witness the mysterious ecosystems thriving beneath the surface. A journey into bioluminescence and silent giants.", author: "Muhammad Rizwan", type: "video", videoUrl: "video14.mp4", aspectRatio: "16-9" }, { id: 28, title: "Underwater Cities: The Deep Blue", category: "Trending Now", description: "Dive into the unexplored depths of the ocean and witness the mysterious ecosystems thriving beneath the surface. A journey into bioluminescence and silent giants.", author: "Muhammad Rizwan", type: "video", videoUrl: "video15.mp4", aspectRatio: "16-9" }, { id: 29, title: "Underwater Cities: The Deep Blue", category: "Trending Now", description: "Dive into the unexplored depths of the ocean and witness the mysterious ecosystems thriving beneath the surface. A journey into bioluminescence and silent giants.", author: "Muhammad Rizwan", type: "video", videoUrl: "video16.mp4", aspectRatio: "16-9" }
        ];

        let currentView = 'gallery';
        let selectedMedia = null;
        let videoPlayer = null;
        const appContainer = document.getElementById('app-container');

        // Utility Functions
        const groupByCategory = (items) => {
            return items.reduce((acc, item) => {
                if (!acc[item.category]) acc[item.category] = [];
                acc[item.category].push(item);
                return acc;
            }, {});
        };

        // Download Function - FIXED for videos
        const downloadMedia = async (url, filename, type) => {
            try {
                // For videos from external domains, we need to use a different approach
                if (type === 'video' && url.includes('http')) {
                    // Create a temporary anchor element to trigger download
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = filename;
                    a.target = '_blank'; // Open in new tab for external videos
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    
                    // Show a message for external videos
                    alert('Video download initiated. If it doesn\'t start automatically, right-click on the video and select "Save video as".');
                } else {
                    // For images and same-domain videos, use the fetch approach
                    const response = await fetch(url);
                    const blob = await response.blob();
                    const blobUrl = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = blobUrl;
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    window.URL.revokeObjectURL(blobUrl);
                }
            } catch (error) {
                console.error('Download failed:', error);
                alert('Download failed. Please try again or right-click and select "Save as".');
            }
        };

        // Render Media Card
        const renderMediaCard = (item) => {
            const badgeClass = item.type === 'video' ? 'badge-video' : 'badge-image';
            const icon = item.type === 'video' 
                ? '<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"/>'
                : '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>';

            const thumbnail = item.type === 'video'
                ? `<video class="w-full h-full object-cover" muted>
                     <source src="${item.videoUrl}" type="video/mp4">
                   </video>`
                : `<img src="${item.imgUrl}" alt="${item.title}" class="w-full h-full object-cover">`;

            return `
                <div onclick="showDetailView(${item.id})" 
                     class="video-card mobile-card relative rounded-xl overflow-hidden shadow-xl cursor-pointer group transition-colors">
                    
                    <div class="relative overflow-hidden h-48">
                        ${thumbnail}
                        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-center justify-center">
                            <div class="transform scale-0 group-hover:scale-100 transition-transform duration-300">
                                <svg class="w-20 h-20 text-white drop-shadow-2xl" fill="currentColor" viewBox="0 0 20 20">
                                    ${icon}
                                </svg>
                            </div>
                        </div>
                        <div class="absolute top-3 right-3">
                            <span class="badge ${badgeClass}">
                                ${item.type}
                            </span>
                        </div>
                    </div>

                    <div class="p-4 dark-mode:bg-gradient-to-br dark-mode:from-gray-800 dark-mode:to-gray-900 light-mode:bg-gradient-to-br light-mode:from-white light-mode:to-gray-100">
                        <h3 class="dark-mode:text-white light-mode:text-gray-900 text-lg font-bold truncate mb-2">${item.title}</h3>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-cyan-400 font-semibold">${item.author}</span>
                            <span class="dark-mode:text-gray-400 light-mode:text-gray-600">${item.category}</span>
                        </div>
                    </div>
                </div>
            `;
        };

        // Simple Video Player
        const createVideoPlayer = (videoUrl, title) => {
            return `
                <div class="simple-video-container">
                    <video id="mainVideo" class="w-full h-auto">
                        <source src="${videoUrl}" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    
                    <div class="simple-controls">
                        <div class="simple-progress" id="progressBar">
                            <div class="simple-progress-filled" id="progressFilled"></div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <button class="simple-control-btn" id="playPauseBtn">
                                    <svg id="playIcon" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"/>
                                    </svg>
                                    <svg id="pauseIcon" class="w-5 h-5 hidden" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                    </svg>
                                </button>
                                
                                <span class="text-white text-sm font-mono" id="timeDisplay">0:00 / 0:00</span>
                            </div>
                            
                            <div class="flex items-center gap-3">
                                <button class="simple-control-btn" id="fullscreenBtn">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h4a1 1 0 010 2H6.414l2.293 2.293a1 1 0 11-1.414 1.414L5 6.414V8a1 1 0 01-2 0V4zm9 1a1 1 0 010-2h4a1 1 0 011 1v4a1 1 0 01-2 0V6.414l-2.293 2.293a1 1 0 11-1.414-1.414L13.586 5H12zm-9 7a1 1 0 012 0v1.586l2.293-2.293a1 1 0 111.414 1.414L6.414 15H8a1 1 0 010 2H4a1 1 0 01-1-1v-4zm13-1a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 010-2h1.586l-2.293-2.293a1 1 0 111.414-1.414L15 13.586V12a1 1 0 011-1z" clip-rule="evenodd"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        // Initialize Video Controls
        const initVideoControls = () => {
            videoPlayer = document.getElementById('mainVideo');
            if (!videoPlayer) return;

            const playPauseBtn = document.getElementById('playPauseBtn');
            const playIcon = document.getElementById('playIcon');
            const pauseIcon = document.getElementById('pauseIcon');
            const progressBar = document.getElementById('progressBar');
            const progressFilled = document.getElementById('progressFilled');
            const timeDisplay = document.getElementById('timeDisplay');
            const fullscreenBtn = document.getElementById('fullscreenBtn');

            // Play/Pause
            playPauseBtn.addEventListener('click', () => {
                if (videoPlayer.paused) {
                    videoPlayer.play();
                    playIcon.classList.add('hidden');
                    pauseIcon.classList.remove('hidden');
                } else {
                    videoPlayer.pause();
                    playIcon.classList.remove('hidden');
                    pauseIcon.classList.add('hidden');
                }
            });

            // Progress Bar
            videoPlayer.addEventListener('timeupdate', () => {
                const percent = (videoPlayer.currentTime / videoPlayer.duration) * 100;
                progressFilled.style.width = percent + '%';
                
                const currentTime = formatTime(videoPlayer.currentTime);
                const duration = formatTime(videoPlayer.duration);
                timeDisplay.textContent = `${currentTime} / ${duration}`;
            });

            progressBar.addEventListener('click', (e) => {
                const rect = progressBar.getBoundingClientRect();
                const percent = (e.clientX - rect.left) / rect.width;
                videoPlayer.currentTime = percent * videoPlayer.duration;
            });

            // Fullscreen
            fullscreenBtn.addEventListener('click', () => {
                if (videoPlayer.requestFullscreen) {
                    videoPlayer.requestFullscreen();
                }
            });

            // Auto-play
            videoPlayer.play().catch(e => console.log('Autoplay prevented'));
        };

        const formatTime = (seconds) => {
            if (isNaN(seconds)) return '0:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        };

        // Gallery View
        const renderGalleryView = () => {
            const grouped = groupByCategory(mediaItems);
            
            let html = `
                <div class="hero-section mobile-hero relative h-96 rounded-2xl overflow-hidden mb-12 shadow-2xl transition-colors">
                    <div class="absolute inset-0">
                        <img src="https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=1200&q=80" alt="Hero" class="w-full h-full object-cover opacity-20">
                    </div>
                    <div class="absolute inset-0 bg-gradient-to-r from-cyan-500/20 to-purple-500/20"></div>
                    <div class="relative h-full flex flex-col justify-center px-8 md:px-16">
                        <h1 class="text-4xl md:text-6xl font-extrabold dark-mode:text-white light-mode:text-gray-900 mb-4 drop-shadow-2xl">
                            Discover Amazing Content
                        </h1>
                        <p class="text-xl dark-mode:text-gray-300 light-mode:text-gray-700 mb-6 max-w-2xl">
                            Explore curated videos and stunning images from creators around the world
                        </p>
                        <button class="bg-gradient-to-r from-cyan-500 to-blue-500 text-white px-8 py-3 rounded-full text-lg font-bold hover:from-cyan-400 hover:to-blue-400 transition-all shadow-lg hover:shadow-cyan-500/50 w-fit">
                            Start Exploring
                        </button>
                    </div>
                </div>
            `;

            for (const category in grouped) {
                html += `
                    <section class="mb-12">
                        <h2 class="text-3xl font-bold dark-mode:text-white light-mode:text-gray-900 mb-6 flex items-center">
                            <span class="w-2 h-8 bg-gradient-to-b from-cyan-400 to-blue-500 rounded-full mr-4"></span>
                            ${category}
                        </h2>
                        <div class="mobile-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                            ${grouped[category].map(renderMediaCard).join('')}
                        </div>
                    </section>
                `;
            }

            appContainer.innerHTML = html;
        };

        // Detail View
        const renderDetailView = (item) => {
            const mediaContent = item.type === 'video'
                ? createVideoPlayer(item.videoUrl, item.title)
                : `<div class="image-container">
                       <img src="${item.imgUrl}" alt="${item.title}" id="mainImage" class="zoomable-image w-full h-auto">
                   </div>`;

            const downloadBtn = `
                <button onclick="downloadMedia('${item.type === 'video' ? item.videoUrl : item.imgUrl}', '${item.title}.${item.type === 'video' ? 'mp4' : 'jpg'}', '${item.type}')" 
                        class="download-btn flex items-center gap-2 border-2 border-cyan-500 text-cyan-400 px-6 py-3 rounded-full font-bold hover:bg-cyan-500 hover:text-white transition-all shadow-lg hover:shadow-cyan-500/50">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                    </svg>
                    Download ${item.type === 'video' ? 'Video' : 'Image'}
                </button>
            `;

            const html = `
                <button onclick="showGalleryView()" class="flex items-center gap-2 text-cyan-400 hover:text-cyan-300 mb-8 font-bold text-lg transition-all group">
                    <svg class="w-6 h-6 transform group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    Back to Gallery
                </button>

                <div class="rounded-2xl shadow-2xl overflow-hidden transition-colors">
                    <div class="p-6 md:p-8">
                        <div class="flex flex-col lg:flex-row gap-8">
                            <div class="lg:w-2/3">
                                ${mediaContent}
                            </div>
                            
                            <div class="lg:w-1/3">
                                <div class="rounded-xl p-6 backdrop-blur-sm transition-colors">
                                    <div class="flex items-center gap-3 mb-4">
                                        <span class="badge ${item.type === 'video' ? 'badge-video' : 'badge-image'}">
                                            ${item.type}
                                        </span>
                                        <span class="dark-mode:text-gray-400 light-mode:text-gray-600 text-sm">${item.category}</span>
                                    </div>
                                    
                                    <h1 class="text-2xl md:text-3xl font-bold dark-mode:text-white light-mode:text-gray-900 mb-4">${item.title}</h1>
                                    <p class="dark-mode:text-gray-300 light-mode:text-gray-700 mb-6 leading-relaxed">${item.description}</p>
                                    
                                    <div class="space-y-4 mb-6">
                                        <div class="flex items-center gap-3">
                                            <svg class="w-5 h-5 text-cyan-400" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                                            </svg>
                                            <span class="dark-mode:text-white light-mode:text-gray-900 font-semibold">${item.author}</span>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <svg class="w-5 h-5 text-cyan-400" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
                                            </svg>
                                            <span class="dark-mode:text-gray-300 light-mode:text-gray-700">Uploaded recently</span>
                                        </div>
                                    </div>
                                    
                                    <div class="flex flex-wrap gap-3">
                                        ${downloadBtn}
                                        <button class="flex items-center gap-2 border-2 border-purple-500 text-purple-400 px-6 py-3 rounded-full font-bold hover:bg-purple-500 hover:text-white transition-all">
                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                                            </svg>
                                            Like
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-12">
                    <h2 class="text-2xl font-bold dark-mode:text-white light-mode:text-gray-900 mb-6">Related Content</h2>
                    <div class="mobile-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${mediaItems
                            .filter(media => media.id !== item.id && media.category === item.category)
                            .slice(0, 3)
                            .map(renderMediaCard)
                            .join('')}
                    </div>
                </div>
            `;

            appContainer.innerHTML = html;

            // Initialize video controls if it's a video
            if (item.type === 'video') {
                setTimeout(initVideoControls, 100);
            } else {
                // Add zoom functionality to images
                const image = document.getElementById('mainImage');
                if (image) {
                    image.addEventListener('click', function() {
                        this.classList.toggle('zoomed');
                    });
                }
            }
        };

        // View Navigation Functions
        const showGalleryView = () => {
            currentView = 'gallery';
            selectedMedia = null;
            renderGalleryView();
        };

        const showDetailView = (id) => {
            currentView = 'detail';
            selectedMedia = mediaItems.find(item => item.id === id);
            renderDetailView(selectedMedia);
        };

        // Theme Toggle Functionality
        const toggleTheme = () => {
            const body = document.body;
            const themeToggle = document.getElementById('themeToggle');
            
            if (body.classList.contains('dark-mode')) {
                body.classList.remove('dark-mode');
                body.classList.add('light-mode');
                themeToggle.classList.remove('dark');
                themeToggle.classList.add('light');
                localStorage.setItem('theme', 'light');
            } else {
                body.classList.remove('light-mode');
                body.classList.add('dark-mode');
                themeToggle.classList.remove('light');
                themeToggle.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            }
        };

        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            // Set initial theme
            const savedTheme = localStorage.getItem('theme') || 'dark';
            const body = document.body;
            const themeToggle = document.getElementById('themeToggle');
            
            if (savedTheme === 'light') {
                body.classList.remove('dark-mode');
                body.classList.add('light-mode');
                themeToggle.classList.remove('dark');
                themeToggle.classList.add('light');
            } else {
                body.classList.remove('light-mode');
                body.classList.add('dark-mode');
                themeToggle.classList.remove('light');
                themeToggle.classList.add('dark');
            }
            
            // Add event listener to theme toggle
            themeToggle.addEventListener('click', toggleTheme);
            
            renderGalleryView();
        });
    </script>
</body>
</html>
